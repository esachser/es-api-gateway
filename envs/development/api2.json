{
    "transports": [
        {
            "type": "http",
            "id": "http",
            "parameters": {
                "routeContext": "/api/v2/teste/",
                "routes": {
                    "/": [
                        "GET",
                        "POST"
                    ],
                    "/healthz": [
                        "GET"
                    ]
                }
            },
            "mids": [
                {
                    "type": "EsPropertyMiddleware",
                    "data": {
                        "name": "response.headers.responsetime",
                        "expression": "props.metrics.timems",
                        "runAfter": true
                    }
                },
                {
                    "type": "EsMetricsMiddleware",
                    "data": {
                        "prop": "metrics.timems"
                    }
                },
                {
                    "type": "EsPropertyMiddleware",
                    "data": {
                        "name": "response.body",
                        "expression": "{ 'var': props.var3 }",
                        "runAfter": true
                    }
                },
                {
                    "type": "EsPropertyMiddleware",
                    "data": {
                        "name": "response.status",
                        "value": 200,
                        "runAfter": true
                    }
                }
            ]
        }
    ],
    "execution": [
        {
            "type": "EsSequenceMiddleware",
            "data": {
                "mids": [
                    {
                        "type": "EsPropertyMiddleware",
                        "data": {
                            "name": "var1",
                            "expression": "1",
                            "runAfter": true
                        }
                    },
                    [
                        {
                            "type": "EsPropertyMiddleware",
                            "data": {
                                "name": "var2",
                                "expression": "(props.var1 || 0) * (props.var4 || 1)",
                                "runAfter": true
                            }
                        },
                        {
                            "type": "EsPropertyMiddleware",
                            "data": {
                                "name": "var4",
                                "expression": "3",
                                "runAfter": false
                            }
                        }
                    ],
                    {
                        "type": "EsPropertyMiddleware",
                        "data": {
                            "name": "var3",
                            "expression": "(props.var2 || 0) * 2",
                            "runAfter": false
                        }
                    }
                ],
                "runAfter": false
            }
        }
    ]
}